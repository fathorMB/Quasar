(function(v,o){typeof exports=="object"&&typeof module<"u"?o(exports,require("react"),require("axios"),require("@microsoft/signalr"),require("react-router-dom")):typeof define=="function"&&define.amd?define(["exports","react","axios","@microsoft/signalr","react-router-dom"],o):(v=typeof globalThis<"u"?globalThis:v||self,o(v.QuasarUiReact={},v.React,v.axios,v.signalR,v.ReactRouterDOM))})(this,(function(v,o,F,de,N){"use strict";function fe(t){const r=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const a in t)if(a!=="default"){const f=Object.getOwnPropertyDescriptor(t,a);Object.defineProperty(r,a,f.get?f:{enumerable:!0,get:()=>t[a]})}}return r.default=t,Object.freeze(r)}const me=fe(de);var L={exports:{}},O={};var B;function he(){if(B)return O;B=1;var t=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function a(f,u,i){var p=null;if(i!==void 0&&(p=""+i),u.key!==void 0&&(p=""+u.key),"key"in u){i={};for(var m in u)m!=="key"&&(i[m]=u[m])}else i=u;return u=i.ref,{$$typeof:t,type:f,key:p,ref:u!==void 0?u:null,props:i}}return O.Fragment=r,O.jsx=a,O.jsxs=a,O}var R={};var Q;function pe(){return Q||(Q=1,process.env.NODE_ENV!=="production"&&(function(){function t(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Oe?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _:return"Fragment";case I:return"Profiler";case E:return"StrictMode";case Ee:return"Suspense";case Ae:return"SuspenseList";case Pe:return"Activity"}if(typeof e=="object")switch(typeof e.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),e.$$typeof){case S:return"Portal";case C:return e.displayName||"Context";case T:return(e._context.displayName||"Context")+".Consumer";case U:var l=e.render;return e=e.displayName,e||(e=l.displayName||l.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ce:return l=e.displayName||null,l!==null?l:t(e.type)||"Memo";case z:l=e._payload,e=e._init;try{return t(e(l))}catch{}}return null}function r(e){return""+e}function a(e){try{r(e);var l=!1}catch{l=!0}if(l){l=console;var w=l.error,y=typeof Symbol=="function"&&Symbol.toStringTag&&e[Symbol.toStringTag]||e.constructor.name||"Object";return w.call(l,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",y),r(e)}}function f(e){if(e===_)return"<>";if(typeof e=="object"&&e!==null&&e.$$typeof===z)return"<...>";try{var l=t(e);return l?"<"+l+">":"<...>"}catch{return"<...>"}}function u(){var e=q.A;return e===null?null:e.getOwner()}function i(){return Error("react-stack-top-frame")}function p(e){if(ae.call(e,"key")){var l=Object.getOwnPropertyDescriptor(e,"key").get;if(l&&l.isReactWarning)return!1}return e.key!==void 0}function m(e,l){function w(){oe||(oe=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",l))}w.isReactWarning=!0,Object.defineProperty(e,"key",{get:w,configurable:!0})}function j(){var e=t(this.type);return ie[e]||(ie[e]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),e=this.props.ref,e!==void 0?e:null}function h(e,l,w,y,$,J){var k=w.ref;return e={$$typeof:g,type:e,key:l,props:w,_owner:y},(k!==void 0?k:null)!==null?Object.defineProperty(e,"ref",{enumerable:!1,get:j}):Object.defineProperty(e,"ref",{enumerable:!1,value:null}),e._store={},Object.defineProperty(e._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(e,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(e,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:$}),Object.defineProperty(e,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:J}),Object.freeze&&(Object.freeze(e.props),Object.freeze(e)),e}function n(e,l,w,y,$,J){var k=l.children;if(k!==void 0)if(y)if(Re(k)){for(y=0;y<k.length;y++)c(k[y]);Object.freeze&&Object.freeze(k)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else c(k);if(ae.call(l,"key")){k=t(e);var P=Object.keys(l).filter(function(Ie){return Ie!=="key"});y=0<P.length?"{key: someKey, "+P.join(": ..., ")+": ...}":"{key: someKey}",ue[k+y]||(P=0<P.length?"{"+P.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,y,k,P,k),ue[k+y]=!0)}if(k=null,w!==void 0&&(a(w),k=""+w),p(l)&&(a(l.key),k=""+l.key),"key"in l){w={};for(var W in l)W!=="key"&&(w[W]=l[W])}else w=l;return k&&m(w,typeof e=="function"?e.displayName||e.name||"Unknown":e),h(e,k,w,u(),$,J)}function c(e){d(e)?e._store&&(e._store.validated=1):typeof e=="object"&&e!==null&&e.$$typeof===z&&(e._payload.status==="fulfilled"?d(e._payload.value)&&e._payload.value._store&&(e._payload.value._store.validated=1):e._store&&(e._store.validated=1))}function d(e){return typeof e=="object"&&e!==null&&e.$$typeof===g}var b=o,g=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),C=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),Ee=Symbol.for("react.suspense"),Ae=Symbol.for("react.suspense_list"),Ce=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),Pe=Symbol.for("react.activity"),Oe=Symbol.for("react.client.reference"),q=b.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=Object.prototype.hasOwnProperty,Re=Array.isArray,D=console.createTask?console.createTask:function(){return null};b={react_stack_bottom_frame:function(e){return e()}};var oe,ie={},ce=b.react_stack_bottom_frame.bind(b,i)(),le=D(f(i)),ue={};R.Fragment=_,R.jsx=function(e,l,w){var y=1e4>q.recentlyCreatedOwnerStacks++;return n(e,l,w,!1,y?Error("react-stack-top-frame"):ce,y?D(f(e)):le)},R.jsxs=function(e,l,w){var y=1e4>q.recentlyCreatedOwnerStacks++;return n(e,l,w,!0,y?Error("react-stack-top-frame"):ce,y?D(f(e)):le)}})()),R}var V;function ge(){return V||(V=1,process.env.NODE_ENV==="production"?L.exports=he():L.exports=pe()),L.exports}var s=ge();const x=F.create({baseURL:"/auth",headers:{"Content-Type":"application/json"},withCredentials:!0});x.interceptors.request.use(t=>{const r=localStorage.getItem("accessToken");return r&&(t.headers.Authorization=`Bearer ${r}`),t},t=>Promise.reject(t)),x.interceptors.response.use(t=>t,async t=>{const r=t.config;if(t.response?.status===401&&r){const i=localStorage.getItem("refreshToken");if(i&&!r._retry){r._retry=!0;try{const p=await F.post("/auth/token/refresh",{refreshToken:i}),{accessToken:m,refreshToken:j}=p.data;return localStorage.setItem("accessToken",m),localStorage.setItem("refreshToken",j),r.headers.Authorization=`Bearer ${m}`,x(r)}catch(p){return localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),window.location.href="/login",Promise.reject(p)}}}const a=t.config?.url?.endsWith("/login"),f=t.response?.data;if(t.response?.status===401&&f?.code==="SESSION_REVOKED"){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),window.dispatchEvent(new CustomEvent("session-revoked",{detail:{message:f.message}}));const i={message:f.message,statusCode:401};return Promise.reject(i)}const u={message:t.response?.status===401&&a?"Invalid username or password":f?.message||t.message||"An error occurred",statusCode:t.response?.status||500};return Promise.reject(u)});const G={login:async t=>{const r=await x.post("/login",t);return localStorage.setItem("accessToken",r.data.accessToken),localStorage.setItem("refreshToken",r.data.refreshToken),r.data},register:async t=>(await x.post("/register",t)).data,refreshToken:async t=>{const r=await x.post("/token/refresh",t);return localStorage.setItem("accessToken",r.data.accessToken),localStorage.setItem("refreshToken",r.data.refreshToken),r.data},logout:async()=>{const t=localStorage.getItem("refreshToken");if(t)try{await x.post("/logout",{refreshToken:t})}catch(r){console.error("Logout error:",r)}localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken")},isAuthenticated:()=>!!localStorage.getItem("accessToken")},H={list:async()=>(await x.get("/users")).data,getRoles:async t=>(await x.get(`/users/${t}/roles`)).data,getPermissions:async t=>(await x.get(`/users/${t}/permissions`)).data,assignRole:async(t,r)=>{await x.post(`/users/${t}/roles`,r)},revokeRole:async(t,r)=>{await x.delete(`/users/${t}/roles/${r}`)},resetPassword:async t=>(await x.post(`/users/${t}/reset-password`)).data.password,resetOwnPassword:async()=>(await x.post("/users/me/reset-password")).data.password,delete:async t=>{await x.delete(`/users/${t}`)}},we={async list(){return(await x.get("/api/features",{baseURL:"/"})).data},async listDirect(){return(await F.get("/api/features",{headers:ve(),withCredentials:!0})).data}};function ve(){const t=localStorage.getItem("accessToken");return t?{Authorization:`Bearer ${t}`}:{}}const X=o.createContext(void 0),M=()=>{const t=o.useContext(X);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},be=({children:t})=>{const[r,a]=o.useState(null),[f,u]=o.useState(!0);o.useEffect(()=>{i()},[]);const i=async()=>{try{const n=localStorage.getItem("accessToken");if(n){const c=p(n);console.log("Decoded payload:",c);const d=c.sub,b=c.unique_name||c.name||"User";let g=[];try{console.log("Fetching roles for userId:",d);const S=await H.getRoles(d);console.log("Fetched userRoles:",S),g=S.map(_=>_.name),console.log("Mapped roles:",g)}catch(S){console.error("Failed to fetch roles",S)}a({id:d,username:b,email:c.email||"",roles:g})}else a(null)}catch(n){console.error("Auth check failed:",n),a(null)}finally{u(!1)}};function p(n){var c=n.split(".")[1],d=c.replace(/-/g,"+").replace(/_/g,"/"),b=decodeURIComponent(window.atob(d).split("").map(function(g){return"%"+("00"+g.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(b)}const h={user:r,isAuthenticated:!!r,isLoading:f,login:async n=>{u(!0);try{await G.login(n),await i()}catch(c){throw a(null),c}finally{u(!1)}},logout:async()=>{u(!0);try{await G.logout()}catch(n){console.error("Logout error:",n)}finally{a(null),u(!1)}}};return s.jsx(X.Provider,{value:h,children:t})};class ye{connection=null;listeners=[];async start(){if(!this.connection){this.connection=new me.HubConnectionBuilder().withUrl("/hubs/notifications",{accessTokenFactory:()=>localStorage.getItem("accessToken")||""}).withAutomaticReconnect().build(),this.connection.on("ReceiveNotification",r=>{this.listeners.forEach(a=>a(r))});try{await this.connection.start(),console.log("Notification SignalR Connected")}catch(r){console.error("Notification SignalR Connection Error: ",r),this.connection=null}}}async stop(){if(this.connection)try{this.connection.off("ReceiveNotification"),await this.connection.stop()}catch(r){console.error("Error stopping SignalR connection:",r)}finally{this.connection=null}}subscribe(r){return this.listeners.push(r),()=>{this.listeners=this.listeners.filter(a=>a!==r)}}}const A=new ye,ke=async()=>{const t=localStorage.getItem("accessToken");if(!t)return[];try{const r=await fetch("/api/player/notifications",{headers:{Authorization:`Bearer ${t}`}});if(r.status===401)return[];if(!r.ok)throw new Error("Failed to fetch notifications");return await r.json()}catch(r){return console.error("Error fetching notifications:",r),[]}},xe=async t=>{const r=localStorage.getItem("accessToken");if(r)try{await fetch(`/api/player/notifications/${t}/read`,{method:"POST",headers:{Authorization:`Bearer ${r}`}})}catch(a){console.error("Error marking notification as read:",a)}},je=async()=>{const t=localStorage.getItem("accessToken");if(t)try{await fetch("/api/player/notifications/read-all",{method:"POST",headers:{Authorization:`Bearer ${t}`}})}catch(r){console.error("Error marking all notifications as read:",r)}},Z=o.createContext(void 0),Ne=({children:t})=>{const[r,a]=o.useState([]),{isAuthenticated:f}=M(),u=r.filter(h=>!h.read).length,i=o.useCallback(h=>{const n={...h,id:h.id||Math.random().toString(36).substring(2,9),timestamp:h.createdAt?new Date(h.createdAt):new Date,read:!1};a(c=>c.some(b=>b.id===n.id)?c:[n,...c].slice(0,50))},[]);o.useEffect(()=>{let h=!0;(async()=>{if(!f){a([]),A.stop().catch(console.error);return}await A.stop(),await A.start();const d=await ke();if(h){const b=d.map(g=>({id:g.id,title:g.title,message:g.message,type:g.type,timestamp:new Date(g.createdAt),read:g.isRead}));a(g=>{const S=new Set(g.map(E=>E.id));return[...b.filter(E=>!S.has(E.id)),...g].sort((E,I)=>I.timestamp.getTime()-E.timestamp.getTime())})}})();const c=A.subscribe(d=>{console.error("SignalR Notification Received:",d),i({id:d.id||d.Id,title:d.title||d.Title,message:d.message||d.Message,type:(d.type||d.Type||"info").toLowerCase(),createdAt:d.createdAt||d.CreatedAt})});return()=>{h=!1,c(),A.stop().catch(console.error)}},[f,i]);const p=o.useCallback(h=>{xe(h),a(n=>n.map(c=>c.id===h?{...c,read:!0}:c))},[]),m=o.useCallback(()=>{je(),a(h=>h.map(n=>({...n,read:!0})))},[]),j=o.useCallback(()=>{a([])},[]);return s.jsx(Z.Provider,{value:{notifications:r,unreadCount:u,addNotification:i,markAsRead:p,markAllAsRead:m,clearNotifications:j},children:t})},K=()=>{const t=o.useContext(Z);if(!t)throw new Error("useNotifications must be used within a NotificationProvider");return t},ee=o.createContext(void 0),Te=({children:t})=>{const[r,a]=o.useState(null),[f,u]=o.useState(!0),[i,p]=o.useState([]),[m,j]=o.useState([]);return o.useEffect(()=>{(async()=>{try{const n=await fetch("/api/config/ui");if(n.ok){const c=await n.json();a(c);const d=`theme-${c.theme||"dark"}`;document.documentElement.className=d}}catch(n){console.error("Failed to fetch UI settings:",n),document.documentElement.className="theme-dark"}finally{u(!1)}})(),Array.isArray(window.__QUASAR_CUSTOM_MENU__)&&p(window.__QUASAR_CUSTOM_MENU__),Array.isArray(window.__QUASAR_CUSTOM_ROUTES__)&&j(window.__QUASAR_CUSTOM_ROUTES__)},[]),s.jsx(ee.Provider,{value:{settings:r,isLoading:f,customMenu:i,customRoutes:m},children:t})},Y=()=>{const t=o.useContext(ee);if(!t)throw new Error("useUi must be used within a UiProvider");return t},te=o.createContext(void 0),Se=({children:t})=>{const[r,a]=o.useState([]),[f,u]=o.useState(!0);o.useEffect(()=>{(async()=>{try{const m=await we.list();a(m)}catch(m){console.error("Failed to fetch features:",m)}finally{u(!1)}})()},[]);const i=p=>r.some(m=>m.id===p);return s.jsx(te.Provider,{value:{features:r,isLoading:f,hasFeature:i},children:t})},se=()=>{const t=o.useContext(te);if(!t)throw new Error("useFeatures must be used within a FeatureProvider");return t},re=()=>{const{notifications:t,unreadCount:r,addNotification:a,markAsRead:f,markAllAsRead:u}=K(),[i,p]=o.useState(!1),m=o.useRef(null);o.useEffect(()=>{const n=A.subscribe(c=>{a({title:c.title,message:c.message,type:c.type})});return A.start(),()=>{n()}},[a]),o.useEffect(()=>{const n=c=>{m.current&&!m.current.contains(c.target)&&p(!1)};return i&&document.addEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}},[i]);const j=n=>{const d=new Date().getTime()-n.getTime(),b=Math.floor(d/6e4);if(b<1)return"Just now";if(b<60)return`${b}m ago`;const g=Math.floor(b/60);return g<24?`${g}h ago`:n.toLocaleDateString()},h=n=>{f(n)};return s.jsxs("div",{className:"notifications-container",ref:m,children:[s.jsxs("button",{className:"bell-button",onClick:()=>p(!i),"aria-label":"Notifications",children:[s.jsx("span",{children:"ðŸ””"}),r>0&&s.jsx("span",{className:"notification-badge",children:r>9?"9+":r})]}),i&&s.jsxs("div",{className:"notifications-dropdown",children:[s.jsxs("div",{className:"notifications-header",children:[s.jsx("h3",{children:"Notifications"}),r>0&&s.jsx("button",{className:"mark-all-btn",onClick:u,children:"Mark all as read"})]}),s.jsx("div",{className:"notifications-list",children:t.length===0?s.jsx("div",{className:"empty-notifications",children:"No notifications yet"}):t.map(n=>s.jsxs("div",{className:`notification-item ${n.read?"read":"unread"}`,onClick:()=>h(n.id),children:[s.jsxs("div",{className:"notification-item-header",children:[s.jsx("span",{className:`notification-title type-${n.type}`,children:n.title}),s.jsx("span",{className:"notification-time",children:j(n.timestamp)})]}),s.jsx("div",{className:"notification-message",children:n.message})]},n.id))})]})]})},ne=()=>{const{user:t,logout:r}=M(),[a,f]=o.useState(!1),[u,i]=o.useState(null),[p,m]=o.useState(!1),[j,h]=o.useState(!1),n=N.useNavigate(),c=o.useRef(null),d=async()=>{await r(),n("/login")},b=async()=>{m(!0),f(!1)},g=async()=>{try{const T=await H.resetOwnPassword();i(T),m(!1)}catch(T){console.error("Failed to change password:",T),alert("Failed to change password"),m(!1)}};o.useEffect(()=>{const T=C=>{c.current&&!c.current.contains(C.target)&&f(!1)};return document.addEventListener("mousedown",T),()=>{document.removeEventListener("mousedown",T)}},[]);const{pathname:S}=N.useLocation(),{customMenu:_}=Y(),I=(()=>{const C=(_.length>0?_:window.__QUASAR_CUSTOM_MENU__||[]).flatMap(U=>U.items).find(U=>U.path===S);if(C)return C.label;switch(S){case"/":return"Dashboard";case"/users":return"Users";case"/roles":return"Roles";case"/features":return"Features";case"/jobs":return"Jobs";case"/logs":return"Logs";case"/metrics":return"Metrics";case"/sessions":return"Sessions";default:return"Dashboard"}})();return s.jsxs(s.Fragment,{children:[s.jsxs("header",{className:"app-header",children:[s.jsx("div",{className:"header-left",children:s.jsx("h2",{className:"page-title",children:I})}),s.jsxs("div",{className:"header-right",children:[s.jsx(re,{}),s.jsxs("div",{className:"user-profile",children:[s.jsxs("div",{className:"user-info",children:[s.jsx("span",{className:"user-name",children:t?.username||"Guest"}),s.jsx("span",{className:"user-role",children:t?.roles?.[0]||"User"})]}),s.jsx("div",{className:"user-avatar",children:t?.username?.charAt(0).toUpperCase()||"U"})]}),s.jsxs("div",{className:"menu-container",ref:c,children:[s.jsx("button",{className:"menu-button","aria-label":"Menu",onClick:()=>f(!a),children:s.jsx("span",{className:"menu-icon",children:"â‹®"})}),a&&s.jsxs("div",{className:"dropdown-menu",children:[s.jsx("button",{onClick:b,className:"dropdown-item",children:"Change Password"}),s.jsx("button",{onClick:d,className:"dropdown-item danger",children:"Sign Out"})]})]})]})]}),p&&s.jsx("div",{className:"modal-overlay",onClick:()=>m(!1),children:s.jsxs("div",{className:"modal",onClick:T=>T.stopPropagation(),children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h2",{className:"modal-title",children:"Confirm Password Change"}),s.jsx("button",{className:"modal-close",onClick:()=>m(!1),children:"Ã—"})]}),s.jsxs("div",{className:"modal-body",children:[s.jsx("p",{children:"Generate a new password?"}),s.jsx("p",{className:"text-muted",style:{marginTop:"var(--spacing-md)"},children:"You will be logged out and need to login with the new password."}),s.jsxs("div",{style:{display:"flex",gap:"var(--spacing-md)",marginTop:"var(--spacing-lg)"},children:[s.jsx("button",{className:"btn btn-secondary",onClick:()=>m(!1),style:{flex:1},children:"Cancel"}),s.jsx("button",{className:"btn btn-primary",onClick:g,style:{flex:1},children:"Change Password"})]})]})]})}),u&&s.jsx("div",{className:"modal-overlay",onClick:()=>{i(null),d()},children:s.jsxs("div",{className:"modal",onClick:T=>T.stopPropagation(),children:[s.jsx("div",{className:"modal-header",children:s.jsx("h2",{className:"modal-title",children:"Password Changed Successfully"})}),s.jsxs("div",{className:"modal-body",children:[s.jsx("p",{children:"Your new password is:"}),s.jsxs("div",{className:"password-display",style:{display:"flex",alignItems:"center",gap:"var(--spacing-md)",padding:"var(--spacing-md)",background:"var(--color-bg-secondary)",borderRadius:"var(--radius-md)"},children:[s.jsx("code",{style:{flex:1,fontSize:"var(--font-size-base)",fontWeight:"bold"},children:u}),s.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>{navigator.clipboard.writeText(u),h(!0),setTimeout(()=>h(!1),2e3)},children:j?"âœ“ Copied!":"ðŸ“‹ Copy"})]}),s.jsx("p",{className:"warning",style:{marginTop:"var(--spacing-md)",padding:"var(--spacing-md)",background:"var(--color-warning-bg)",border:"1px solid var(--color-warning)",borderRadius:"var(--radius-md)"},children:"âš ï¸ Save this password now. You will be logged out."}),s.jsx("button",{className:"btn btn-primary",onClick:()=>{i(null),d()},style:{marginTop:"var(--spacing-lg)",width:"100%"},children:"Logout Now"})]})]})})]})},_e=({children:t})=>{const{user:r,logout:a}=M(),{settings:f,customMenu:u}=Y(),{hasFeature:i}=se(),p=N.useNavigate(),m=async()=>{await a(),p("/login")};return s.jsxs("div",{className:"main-layout",children:[s.jsxs("aside",{className:"sidebar",children:[s.jsx("div",{className:"sidebar-header",children:s.jsxs("div",{className:"logo",children:[s.jsx("div",{className:"logo-icon",children:f?.logoSymbol||"Q"}),s.jsx("span",{className:"logo-text",children:f?.applicationName||"Quasar"})]})}),s.jsxs("nav",{className:"sidebar-nav",children:[u.map((j,h)=>s.jsxs("div",{className:"nav-section",children:[j.title&&s.jsx("h3",{className:"nav-section-title",children:j.title}),j.items.map((n,c)=>n.roles&&!n.roles.some(d=>r?.roles?.includes(d))||n.feature&&!i(n.feature)?null:s.jsx(N.Link,{to:n.path,className:"nav-link",children:s.jsx("span",{children:n.label})},`custom-item-${c}-${n.path}`))]},`custom-${h}`)),r?.roles?.includes("administrator")&&f?.showAdminMenu!==!1&&s.jsxs("div",{className:"nav-section",children:[s.jsx("h3",{className:"nav-section-title",children:"Administration"}),s.jsx(N.Link,{to:"/users",className:"nav-link",children:s.jsx("span",{children:"Users"})}),s.jsx(N.Link,{to:"/roles",className:"nav-link",children:s.jsx("span",{children:"Roles"})}),s.jsx(N.Link,{to:"/features",className:"nav-link",children:s.jsx("span",{children:"Features"})}),s.jsx(N.Link,{to:"/logs",className:"nav-link",children:s.jsx("span",{children:"Logs"})}),s.jsx(N.Link,{to:"/sessions",className:"nav-link",children:s.jsx("span",{children:"Sessions"})}),i("scheduler")&&s.jsx(N.Link,{to:"/jobs",className:"nav-link",children:s.jsx("span",{children:"Jobs"})}),i("telemetry")&&s.jsx(N.Link,{to:"/metrics",className:"nav-link",children:s.jsx("span",{children:"Metrics"})})]})]}),s.jsx("div",{className:"sidebar-footer",children:s.jsx("button",{onClick:m,className:"btn btn-secondary w-full btn-sm",children:"Sign Out"})})]}),s.jsxs("div",{className:"content-wrapper",children:[s.jsx(ne,{}),s.jsx("main",{className:`main-content ${N.Outlet?.type?.layoutOptions?.noPadding?"no-padding":""}`,children:t||s.jsx(N.Outlet,{})})]})]})};v.AuthProvider=be,v.FeatureProvider=Se,v.Header=ne,v.MainLayout=_e,v.NotificationBell=re,v.NotificationProvider=Ne,v.UiProvider=Te,v.useAuth=M,v.useFeatures=se,v.useNotifications=K,v.useUi=Y,Object.defineProperty(v,Symbol.toStringTag,{value:"Module"})}));
